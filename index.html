<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADC Shooter Game</title>
    <style>
        canvas {
            border: 1px solid black;
            background: #f0f0f0;
        }
        #gameContainer {
            text-align: center;
            padding: 20px;
        }
        #score {
            font-size: 24px;
            margin: 10px;
        }
        .restart-button {
            padding: 10px 20px;
            font-size: 18px;
            display: none;
            margin: 10px auto;
        }
    </style>
</head>
<body>
    <h1>Killing ADC</h1>
    <h2>Designed by Helen S Huang</h2>
    <div id="gameContainer">
        
        <div id="score">Score: 0 <span id="timer" style="color: red;">Time Left: 2:00</span></div>
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <button id="startButton" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 20px 40px; font-size: 24px;" onclick="startGame()">Start Game</button>
        <button class="restart-button" onclick="restartGame()">Play Again</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const restartButton = document.querySelector('.restart-button');

        const targets = [];
        let score = 0;
        let gameOver = false;
        let startTime;
        let gameStarted = false;
        let timeInMinutes = 0;
        const gameDuration = 2 * 60 * 1000; // 2 minutes in milliseconds
        let explosionParticles = [];
        let gameTime = 0;

        const shooter = {
            x: canvas.width / 2,
            y: canvas.height - 80,
            width: 80,
            height: 60
        };

        const bullet = {
            x: shooter.x,
            y: shooter.y,
            width: 6,
            height: 12,
            active: false
        };

        const targetTypes = [
            'CD33', 'CD30', 'HER2', 'CD22', 'CD79b', 
            'Nectin-4', 'Trop-2', 'BCMA', 'CD19', 'FRÎ±', 
            'Tissue Factor'
        ];

        function drawCoin(x, y, width, height, label) {
            const coinRadius = width * 0.75;
            
            // Draw gold coin
            ctx.beginPath();
            ctx.arc(x + coinRadius, y + coinRadius, coinRadius, 0, Math.PI * 2);
            ctx.fillStyle = '#FFD700'; // Gold color
            ctx.fill();
            ctx.strokeStyle = '#B8860B';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // Draw label text
            ctx.fillStyle = 'black';
            ctx.font = 'bold 14px Arial';
            const textWidth = ctx.measureText(label).width;
            ctx.fillText(label, x + coinRadius - textWidth / 2, y + coinRadius + 5);
        }

        function createTarget() {
            const timeInMinutes = gameTime / (60 * 60);
            const bombChance = Math.min(0.7, 0.3 + (timeInMinutes * 0.2));
            const baseSpeed = 2 + Math.random() * 3 + (timeInMinutes * 3.0);
            
            if (Math.random() > Math.max(bombChance, 0.3)) {
                return {
                    x: Math.random() * (canvas.width - 80),
                    y: -45,
                    width: 40,
                    height: 30,
                    speed: baseSpeed,
                    type: 'coin',
                    label: targetTypes[Math.floor(Math.random() * targetTypes.length)]
                };
            } else {
                return {
                    x: Math.random() * (canvas.width - 30),
                    y: -30,
                    width: 30,
                    height: 30,
                    speed: baseSpeed * 1.2,
                    type: 'bomb',
                    label: 'SAE'
                };
            }
        }

        function drawBomb(x, y, width, height) {
            const bombRadius = width * 0.75;
            ctx.beginPath();
            ctx.fillStyle = '#ff4444';
            ctx.arc(x + bombRadius, y + bombRadius, bombRadius, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 3;
            ctx.moveTo(x + width/2, y);
            ctx.lineTo(x + width/2, y - height/3);
            ctx.stroke();
            ctx.fillStyle = 'white';
            ctx.font = '12px Arial';
            ctx.fillText('SAE', x + bombRadius - ctx.measureText('SAE').width / 2, y + bombRadius + 5);
        }

        function drawSlingshot() {
            ctx.beginPath();
            ctx.strokeStyle = '#8B4513';
            ctx.lineWidth = 8;
            ctx.moveTo(shooter.x - shooter.width/2, shooter.y + shooter.height);
            ctx.lineTo(shooter.x - shooter.width/4, shooter.y);
            ctx.moveTo(shooter.x + shooter.width/2, shooter.y + shooter.height);
            ctx.lineTo(shooter.x + shooter.width/4, shooter.y);
            ctx.stroke();
            if (!bullet.active) {
                ctx.beginPath();
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 3;
                ctx.moveTo(shooter.x - shooter.width/4, shooter.y);
                ctx.lineTo(shooter.x, shooter.y - 10);
                ctx.lineTo(shooter.x + shooter.width/4, shooter.y);
                ctx.stroke();
                ctx.fillStyle = 'black';
                ctx.font = '16px Arial';
                ctx.fillText('ADC', shooter.x - 15, shooter.y - 20);
            }
        }

        function checkCollision(bullet, target) {
            if (target.type === 'coin') {
                const coinRadius = target.width * 0.75;
                return bullet.x >= target.x && 
                       bullet.x <= target.x + coinRadius * 2 &&
                       bullet.y >= target.y && 
                       bullet.y <= target.y + coinRadius * 2;
            } else {
                return bullet.x >= target.x && 
                       bullet.x <= target.x + target.width &&
                       bullet.y >= target.y && 
                       bullet.y <= target.y + target.height;
            }
        }

        function createExplosion(x, y) {
            for (let i = 0; i < 50; i++) {
                explosionParticles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 10,
                    vy: (Math.random() - 0.5) * 10,
                    life: 60
                });
            }
        }

        function updateAndDrawExplosion() {
            ctx.fillStyle = '#ff4444';
            for (let i = explosionParticles.length - 1; i >= 0; i--) {
                const particle = explosionParticles[i];
                particle.x += particle.vx;
                particle.y += particle.vy;
                particle.life--;
                
                if (particle.life <= 0) {
                    explosionParticles.splice(i, 1);
                    continue;
                }

                ctx.beginPath();
                ctx.arc(particle.x, particle.y, 3, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function drawBullet() {
            if (bullet.active) {
                ctx.fillStyle = 'black';
                ctx.beginPath();
                ctx.arc(bullet.x, bullet.y, bullet.width/2, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function drawTargets() {
            targets.forEach(target => {
                if (target.type === 'coin') {
                    drawCoin(target.x, target.y, target.width, target.height, target.label);
                } else {
                    drawBomb(target.x, target.y, target.width, target.height);
                }
            });
        }

        function updateBullet() {
            if (bullet.active) {
                bullet.y -= 7;
                if (bullet.y < 0) {
                    bullet.active = false;
                }
            }
        }

        function updateTargets() {
            for (let i = targets.length - 1; i >= 0; i--) {
                const target = targets[i];
                target.y += target.speed;

                if (target.y > canvas.height) {
                    targets.splice(i, 1);
                    continue;
                }

                if (bullet.active) {
                    if (checkCollision(bullet, target)) {
                        bullet.active = false;
                        if (target.type === 'coin') {
                            score += 5;
                            scoreElement.textContent = 'Score: ' + score;
                            targets.splice(i, 1);
                        } else {
                            gameOver = true;
                            createExplosion(target.x + target.width/2, target.y + target.height/2);
                            setTimeout(() => {
                                restartButton.style.display = 'block';
                            }, 2000);
                        }
                    }
                }
            }
        }

        function startGame() {
            document.getElementById('startButton').style.display = 'none';
            startTime = Date.now();
            gameStarted = true;
        }
        
        function gameLoop() {
            // Update timer
            const elapsedTime = Date.now() - startTime;
            const timeLeft = Math.max(0, gameDuration - elapsedTime);
            const minutes = Math.floor(timeLeft / 60000);
            const seconds = Math.floor((timeLeft % 60000) / 1000);
            document.getElementById('timer').textContent = `Time Left: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            
            // End game if time is up
            if (timeLeft <= 0 && !gameOver) {
                gameOver = true;
                setTimeout(() => {
                    restartButton.style.display = 'block';
                }, 2000);
            }
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (!gameOver && gameStarted) {
                gameTime++;
                if (Math.random() < 0.05 + (timeInMinutes * 0.05)) {
                    targets.push(createTarget());
                }
                updateBullet();
                updateTargets();
            }

            if (gameStarted) {
                drawSlingshot();
            }
            drawBullet();
            drawTargets();
            
            if (gameOver) {
                updateAndDrawExplosion();
                ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = 'white';
                ctx.font = '48px Arial';
                ctx.fillText('GAME OVER', canvas.width/2 - 120, canvas.height/2);
                ctx.font = '24px Arial';
                ctx.fillText('Final Score: ' + score, canvas.width/2 - 60, canvas.height/2 + 40);
            }

            requestAnimationFrame(gameLoop);
        }

        function restartGame() {
            score = 0;
            gameOver = false;
            gameTime = 0;
            targets.length = 0;
            explosionParticles.length = 0;
            bullet.active = false;
            scoreElement.textContent = 'Score: 0';
            restartButton.style.display = 'none';
        }

        canvas.addEventListener('mousemove', (e) => {
            if (!gameOver) {
                const rect = canvas.getBoundingClientRect();
                shooter.x = e.clientX - rect.left;
                if (!bullet.active) {
                    bullet.x = shooter.x;
                }
            }
        });

        canvas.addEventListener('click', () => {
            if (!bullet.active && !gameOver) {
                bullet.active = true;
                bullet.x = shooter.x;
                bullet.y = shooter.y;
            }
        });

        gameLoop();
    </script>
</body>
</html>
